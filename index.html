<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Aquaentra Gallery</title>

<style>
*{box-sizing:border-box;margin:0;padding:0;}

body{
  font-family:system-ui,Arial;
  background:#0b1220;
  color:#e5e7eb;
}

/* NAVBAR */
.navbar{
  position:sticky;
  top:0;
  background:#111;
  padding:8px 24px 10px;
  box-shadow:0 2px 10px rgba(0,0,0,0.4);
  text-align:center;
}

.nav-center{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:14px;
}

.logo{width:56px;}
.brand{font-size:26px;font-weight:700;}

.nav-right{
  position:absolute;
  right:24px;
  top:50%;
  transform:translateY(-50%);
  display:flex;
  gap:10px;
}

.nav-btn{
  background:#00bcd4;
  border:none;
  padding:8px 14px;
  border-radius:8px;
  cursor:pointer;
  font-weight:600;
  color:#000;
}

/* CONTAINER */
.container{
  max-width:1200px;
  margin:auto;
  padding:40px 20px;
}

/* GALLERY */
.gallery{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
  gap:20px;
  margin-top:20px;
}

.card{
  background:#1a1a1a;
  padding:12px;
  border-radius:12px;
}

.card img{width:100%;border-radius:10px;}

footer{
  text-align:center;
  padding:40px 20px;
  opacity:.6;
}
</style>
</head>

<body>

<header class="navbar">
  <div class="nav-center">
    <img src="logo.png" class="logo">
    <span class="brand">Aquaentra Gallery</span>
  </div>

  <div class="nav-right" id="navUserArea">
    <button class="nav-btn" onclick="showLogin()">GiriÅŸ</button>
    <button class="nav-btn" onclick="showRegister()">KayÄ±t</button>
  </div>
</header>

<div class="container">

  <!-- ANA SAYFA -->
  <div id="homePage">
    <h2>Galeri</h2>
    <div id="gallery" class="gallery"></div>
  </div>

  <!-- ÃœYE PANELÄ° -->
  <div id="memberPage" style="display:none;">
    <h2>Ãœye Paneli</h2>

    <h3>FotoÄŸraf YÃ¼kle</h3>
    <input type="file" id="uploadInput" accept="image/*">
    <button class="nav-btn" onclick="uploadPhoto()">YÃ¼kle</button>

    <h3 style="margin-top:30px;">YÃ¼klediklerim</h3>
    <div id="myPhotos" class="gallery"></div>
  </div>

</div>

<footer>Â© Aquaentra</footer>

<!-- AUTH MODAL -->
<div id="authModal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.6);align-items:center;justify-content:center;z-index:2000;">
  <div style="background:#111;padding:24px;border-radius:12px;width:300px;">
    <h3 id="authTitle">GiriÅŸ</h3>
    <input id="authUser" placeholder="KullanÄ±cÄ± adÄ±" style="width:100%;margin-top:10px;padding:8px;border-radius:6px;border:none;">
    <input id="authPass" type="password" placeholder="Åžifre" style="width:100%;margin-top:10px;padding:8px;border-radius:6px;border:none;">
    <button class="nav-btn" style="width:100%;margin-top:12px;" onclick="authAction()">Devam</button>
    <button class="nav-btn" style="width:100%;margin-top:6px;background:#444;color:#fff;" onclick="closeAuth()">Kapat</button>
  </div>
</div>

<script>
const ADMIN_USER="admin";

/* NAVBAR */
function updateNavbar(){
  const user=localStorage.getItem("loggedUser");

  if(user){
    navUserArea.innerHTML=`
      <button class="nav-btn" onclick="openMember()">Ãœye Paneli</button>
      <span>ðŸ‘¤ ${user}</span>
      <button class="nav-btn" onclick="logout()">Ã‡Ä±kÄ±ÅŸ</button>
    `;
  }
}

/* SAYFA GEÃ‡Ä°Åž */
function openMember(){
  homePage.style.display="none";
  memberPage.style.display="block";
  loadMyPhotos();
}

function openHome(){
  homePage.style.display="block";
  memberPage.style.display="none";
}

/* FOTO YÃœKLE */
function uploadPhoto(){
  const user=localStorage.getItem("loggedUser");
  if(!user) return alert("GiriÅŸ yap");

  const file=uploadInput.files[0];
  if(!file) return alert("Dosya seÃ§");

  const reader=new FileReader();

  reader.onload=function(e){
    const img=new Image();
    img.onload=function(){
      const canvas=document.createElement("canvas");
      const maxWidth=800;
      const scale=Math.min(1,maxWidth/img.width);

      canvas.width=img.width*scale;
      canvas.height=img.height*scale;

      canvas.getContext("2d").drawImage(img,0,0,canvas.width,canvas.height);
      const compressed=canvas.toDataURL("image/jpeg",0.7);

      savePendingPhoto(compressed,user);
      alert("Admin onayÄ±na gÃ¶nderildi");
      loadMyPhotos();
    };
    img.src=e.target.result;
  };

  reader.readAsDataURL(file);
}

function savePendingPhoto(src,user){
  const pending=JSON.parse(localStorage.getItem("pendingPhotos")||"[]");
  pending.push({id:Date.now(),src,user,likes:0});
  localStorage.setItem("pendingPhotos",JSON.stringify(pending));
}

/* BENÄ°M FOTO */
function loadMyPhotos(){
  const user=localStorage.getItem("loggedUser");
  const pending=JSON.parse(localStorage.getItem("pendingPhotos")||"[]");
  const mine=pending.filter(p=>p.user===user);

  myPhotos.innerHTML="";

  mine.forEach(photo=>{
    const card=document.createElement("div");
    card.className="card";

    card.innerHTML=`
      <img src="${photo.src}">
      <button class="nav-btn" style="margin-top:8px;background:#ef4444;color:#fff;" onclick="deleteMyPhoto(${photo.id})">Sil</button>
    `;
    myPhotos.appendChild(card);
  });
}

function deleteMyPhoto(id){
  let pending=JSON.parse(localStorage.getItem("pendingPhotos")||"[]");
  pending=pending.filter(p=>p.id!==id);
  localStorage.setItem("pendingPhotos",JSON.stringify(pending));
  loadMyPhotos();
}

/* GALERÄ° */
function loadApprovedPhotos(){
  const approved=JSON.parse(localStorage.getItem("approvedPhotos")||"[]");
  gallery.innerHTML="";
  approved.forEach(p=>{
    const card=document.createElement("div");
    card.className="card";
    card.innerHTML=`<img src="${p.src}">`;
    gallery.appendChild(card);
  });
}

/* AUTH */
let authMode="login";

function showLogin(){authMode="login";authModal.style.display="flex";}
function showRegister(){authMode="register";authModal.style.display="flex";}
function closeAuth(){authModal.style.display="none";}

function authAction(){
  const user=authUser.value;
  const pass=authPass.value;
  if(!user||!pass) return alert("BoÅŸ bÄ±rakma");

  if(authMode==="register"){
    localStorage.setItem("user_"+user,pass);
    alert("KayÄ±t baÅŸarÄ±lÄ±");
  }else{
    if(localStorage.getItem("user_"+user)===pass){
      localStorage.setItem("loggedUser",user);
      updateNavbar();
      closeAuth();
      loadApprovedPhotos();
    }else alert("HatalÄ± giriÅŸ");
  }
}

function logout(){
  localStorage.removeItem("loggedUser");
  location.reload();
}

/* INIT */
updateNavbar();
loadApprovedPhotos();
</script>

</body>
</html>
