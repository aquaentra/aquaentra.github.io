<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Aquaentra Gallery</title>

<style>
*{
  box-sizing:border-box;
  margin:0;
  padding:0;
}

body{
  font-family: system-ui, Arial;
  background:#0b1220;
  color:#e5e7eb;
}

/* NAVBAR */
.navbar{
  position:sticky;
  top:0;
  background:#111;
  color:white;
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:14px 24px;
  box-shadow:0 2px 10px rgba(0,0,0,0.4);
  z-index:999;
}

.nav-left{
  display:flex;
  align-items:center;
  gap:10px;
}

.logo{
  width:42px;
}

.brand{
  font-size:20px;
  font-weight:bold;
}

.nav-right{
  display:flex;
  gap:10px;
}

.nav-btn{
  background:#00bcd4;
  border:none;
  padding:8px 14px;
  border-radius:8px;
  cursor:pointer;
  font-weight:600;
}

/* CONTAINER */
.container{
  max-width:1200px;
  margin:auto;
  padding:40px 20px;
}

/* GALLERY */
.gallery{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
  gap:20px;
  margin-top:20px;
}

.card{
  background:#1a1a1a;
  padding:12px;
  border-radius:12px;
}

.card img{
  width:100%;
  border-radius:10px;
}

.actions{
  display:flex;
  justify-content:space-between;
  margin-top:8px;
}

.like-btn{
  background:#ff4081;
  border:none;
  color:white;
  padding:6px 10px;
  border-radius:6px;
  cursor:pointer;
}

.comment-box{
  width:100%;
  margin-top:6px;
  padding:6px;
  border-radius:6px;
  border:none;
}

footer{
  text-align:center;
  padding:40px 20px;
  opacity:.6;
  font-size:.85rem;
}
</style>
</head>

<body>

<!-- NAVBAR -->
<header class="navbar">
  <div class="nav-left">
    <img src="logo.png" class="logo">
    <span class="brand">Aquaentra Gallery</span>
  </div>

  <div class="nav-right" id="navUserArea">
    <button class="nav-btn" onclick="showLogin()">Giri≈ü</button>
    <button class="nav-btn" onclick="showRegister()">Kayƒ±t</button>
  </div>
</header>

<!-- ANA ƒ∞√áERƒ∞K -->
<div class="container">

  <h2>Fotoƒüraf Y√ºkle</h2>
  <input type="file" id="uploadInput" accept="image/*">
  <button onclick="uploadPhoto()">Y√ºkle</button>

  <hr style="margin:20px 0;">

  <h2>Galeri</h2>
  <div id="gallery" class="gallery"></div>

</div>

<footer>
  ¬© Aquaentra
</footer>

<!-- AUTH MODAL -->
<div id="authModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,.6); align-items:center; justify-content:center; z-index:2000;">
  <div style="background:#111; padding:24px; border-radius:12px; width:300px;">
    <h3 id="authTitle">Giri≈ü</h3>

    <input id="authUser" placeholder="Kullanƒ±cƒ± adƒ±" style="width:100%;margin-top:10px;padding:8px;border-radius:6px;border:none;">
    <input id="authPass" type="password" placeholder="≈ûifre" style="width:100%;margin-top:10px;padding:8px;border-radius:6px;border:none;">

    <button class="nav-btn" style="width:100%;margin-top:12px;" onclick="authAction()">Devam</button>
    <button class="nav-btn" style="width:100%;margin-top:6px;background:#444;" onclick="closeAuth()">Kapat</button>
  </div>
</div>

<script>
<script>
// ===== AYAR =====
const ADMIN_USER = "admin"; // admin kullanƒ±cƒ± adƒ±

// ===== FOTO Y√úKLE =====
function uploadPhoto(){
  const user = localStorage.getItem("loggedUser");
  if(!user){
    alert("√ñnce giri≈ü yap");
    return;
  }

  const input = document.getElementById("uploadInput");
  const file = input.files[0];
  if(!file) return;

  const reader = new FileReader();
  reader.onload = function(e){
    savePendingPhoto(e.target.result, user);
    alert("Foto admin onayƒ±na g√∂nderildi");
  };
  reader.readAsDataURL(file);
}

// ===== BEKLEYENLERE KAYDET =====
function savePendingPhoto(src, user){
  const pending = JSON.parse(localStorage.getItem("pendingPhotos") || "[]");

  pending.push({
    id: Date.now(),
    src: src,
    user: user,
    likes: 0
  });

  localStorage.setItem("pendingPhotos", JSON.stringify(pending));
}

// ===== GALERƒ∞YE EKLE =====
function addToGallery(photo){
  const gallery = document.getElementById("gallery");

  const card = document.createElement("div");
  card.className = "card";

  card.innerHTML = `
    <img src="${photo.src}">
    <div class="actions">
      <button class="like-btn" onclick="like(this)">‚ù§Ô∏è ${photo.likes}</button>
    </div>
    <input class="comment-box" placeholder="Yorum yaz...">
  `;

  gallery.prepend(card);
}

// ===== LIKE =====
function like(btn){
  let count = parseInt(btn.innerText.split(" ")[1]);
  count++;
  btn.innerText = "‚ù§Ô∏è " + count;
}

// ===== AUTH =====
let authMode = "login";

function showLogin(){
  authMode = "login";
  document.getElementById("authTitle").innerText = "Giri≈ü";
  document.getElementById("authModal").style.display = "flex";
}

function showRegister(){
  authMode = "register";
  document.getElementById("authTitle").innerText = "Kayƒ±t";
  document.getElementById("authModal").style.display = "flex";
}

function closeAuth(){
  document.getElementById("authModal").style.display = "none";
}

function authAction(){
  const user = document.getElementById("authUser").value;
  const pass = document.getElementById("authPass").value;

  if(!user || !pass) return alert("Bo≈ü bƒ±rakma");

  if(authMode === "register"){
    localStorage.setItem("user_"+user, pass);
    alert("Kayƒ±t ba≈üarƒ±lƒ±");
  }else{
    const saved = localStorage.getItem("user_"+user);
    if(saved === pass){
      localStorage.setItem("loggedUser", user);
      updateNavbar();
      closeAuth();
      loadApprovedPhotos();
      loadAdminPanel();
    }else{
      alert("Hatalƒ± giri≈ü");
    }
  }
}

function updateNavbar(){
  const user = localStorage.getItem("loggedUser");
  const area = document.getElementById("navUserArea");

  if(user){
    area.innerHTML = `
      <span style="margin-right:10px;">üë§ ${user}</span>
      <button class="nav-btn" onclick="logout()">√áƒ±kƒ±≈ü</button>
    `;
  }
}

function logout(){
  localStorage.removeItem("loggedUser");
  location.reload();
}

// ===== ONAYLANANLARI Y√úKLE =====
function loadApprovedPhotos(){
  const approved = JSON.parse(localStorage.getItem("approvedPhotos") || "[]");
  document.getElementById("gallery").innerHTML = "";
  approved.forEach(addToGallery);
}

// ===== ADMIN PANEL =====
function loadAdminPanel(){
  const user = localStorage.getItem("loggedUser");
  if(user !== ADMIN_USER) return;

  const container = document.querySelector(".container");

  const panel = document.createElement("div");
  panel.innerHTML = `
    <h2 style="margin-top:40px;">üõ°Ô∏è Admin Onay Paneli</h2>
    <div id="adminPending" class="gallery"></div>
  `;

  container.appendChild(panel);

  renderPending();
}

function renderPending(){
  const pending = JSON.parse(localStorage.getItem("pendingPhotos") || "[]");
  const area = document.getElementById("adminPending");
  if(!area) return;

  area.innerHTML = "";

  pending.forEach(photo=>{
    const card = document.createElement("div");
    card.className = "card";

    card.innerHTML = `
      <img src="${photo.src}">
      <button class="nav-btn" style="margin-top:8px;" onclick="approvePhoto(${photo.id})">Onayla</button>
    `;

    area.appendChild(card);
  });
}

// ===== ONAYLA =====
function approvePhoto(id){
  let pending = JSON.parse(localStorage.getItem("pendingPhotos") || "[]");
  let approved = JSON.parse(localStorage.getItem("approvedPhotos") || "[]");

  const photo = pending.find(p => p.id === id);
  if(!photo) return;

  approved.push(photo);
  pending = pending.filter(p => p.id !== id);

  localStorage.setItem("pendingPhotos", JSON.stringify(pending));
  localStorage.setItem("approvedPhotos", JSON.stringify(approved));

  renderPending();
  loadApprovedPhotos();
}

// ===== SAYFA A√áILI≈û =====
updateNavbar();
loadApprovedPhotos();
loadAdminPanel();
</script>

</script>

</body>
</html>
