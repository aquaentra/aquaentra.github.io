<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Aquaentra Gallery</title>

<style>
*{box-sizing:border-box;margin:0;padding:0;}

body{
  font-family:system-ui,Arial;
  background:#0b1220;
  color:#e5e7eb;
}

/* NAVBAR */
.navbar{
  position:sticky;
  top:0;
  background:#111;
  padding:10px 24px;
  box-shadow:0 2px 10px rgba(0,0,0,0.4);
  display:flex;
  align-items:center;
  justify-content:space-between;
}

.nav-left{
  display:flex;
  align-items:center;
  gap:10px;
}

.logo{width:44px;}
.brand{font-size:22px;font-weight:700;}

.nav-right{display:flex;gap:10px;}

.nav-btn{
  background:#00bcd4;
  border:none;
  padding:8px 14px;
  border-radius:8px;
  cursor:pointer;
  font-weight:600;
  color:#000;
}

/* CONTAINER */
.container{
  max-width:1100px;
  margin:auto;
  padding:40px 20px;
}

/* PROFILE */
.profile-box{
  text-align:center;
  margin-bottom:30px;
}

.profile-logo{
  width:120px;
  height:120px;
  border-radius:50%;
  object-fit:cover;
  border:3px solid #00bcd4;
}

.bio{
  margin-top:10px;
  width:300px;
  max-width:90%;
  padding:8px;
  border-radius:8px;
  border:none;
}

/* DIVIDER */
.divider{
  margin:30px 0 20px;
  border-top:1px solid #334155;
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding-top:14px;
}

/* GALLERY */
.gallery{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
  gap:20px;
}

.card{
  background:#1a1a1a;
  padding:12px;
  border-radius:12px;
}

.card img{
  width:100%;
  border-radius:10px;
}

footer{
  text-align:center;
  padding:40px 20px;
  opacity:.6;
}
</style>
</head>

<body>

<header class="navbar">
  <div class="nav-left">
    <img src="logo.png" class="logo">
    <span class="brand">Aquaentra Gallery</span>
  </div>

  <div class="nav-right" id="navUserArea">
    <button class="nav-btn" onclick="showLogin()">GiriÅŸ</button>
    <button class="nav-btn" onclick="showRegister()">KayÄ±t</button>
  </div>
</header>

<div class="container">

  <!-- ANA SAYFA -->
  <div id="homePage">
    <h2>Galeri</h2>
    <div id="gallery" class="gallery"></div>
  </div>

  <!-- ÃœYE PANELÄ° -->
  <div id="memberPage" style="display:none;">

    <div class="profile-box">
      <img id="profileLogo" class="profile-logo" src="https://via.placeholder.com/120">

      <div style="margin-top:10px;">
        <input type="file" id="logoInput" accept="image/*">
        <button class="nav-btn" onclick="changeLogo()">Logo DeÄŸiÅŸtir</button>
      </div>

      <h2 id="profileName" style="margin-top:14px;"></h2>

      <textarea id="bioInput" class="bio" placeholder="Biyografi yaz..."></textarea><br>
      <button class="nav-btn" style="margin-top:8px;" onclick="saveBio()">Biyografiyi Kaydet</button>
    </div>

    <div class="divider">
      <h3>FotoÄŸraf YÃ¼kle</h3>
      <div>
        <input type="file" id="uploadInput" accept="image/*">
        <button class="nav-btn" onclick="uploadPhoto()">YÃ¼kle</button>
      </div>
    </div>

    <div id="myPhotos" class="gallery"></div>

  </div>

</div>

<footer>Â© Aquaentra</footer>

<script>
const ADMIN_USER="admin";

/* NAVBAR */
function updateNavbar(){
  const user=localStorage.getItem("loggedUser");

  if(user){
    navUserArea.innerHTML=`
      <button class="nav-btn" onclick="openMember()">Ãœye Paneli</button>
      <span>ðŸ‘¤ ${user}</span>
      <button class="nav-btn" onclick="logout()">Ã‡Ä±kÄ±ÅŸ</button>
    `;
  }
}

/* SAYFA */
function openMember(){
  homePage.style.display="none";
  memberPage.style.display="block";

  const user=localStorage.getItem("loggedUser");
  profileName.innerText=user;

  loadProfile();
  loadMyPhotos();
}

function openHome(){
  homePage.style.display="block";
  memberPage.style.display="none";
}

/* PROFÄ°L */
function loadProfile(){
  const user=localStorage.getItem("loggedUser");

  const logo=localStorage.getItem("logo_"+user);
  const bio=localStorage.getItem("bio_"+user);

  if(logo) profileLogo.src=logo;
  if(bio) bioInput.value=bio;
}

function changeLogo(){
  const user=localStorage.getItem("loggedUser");
  const file=logoInput.files[0];
  if(!file) return alert("Logo seÃ§");

  const reader=new FileReader();
  reader.onload=e=>{
    localStorage.setItem("logo_"+user,e.target.result);
    profileLogo.src=e.target.result;
  };
  reader.readAsDataURL(file);
}

function saveBio(){
  const user=localStorage.getItem("loggedUser");
  localStorage.setItem("bio_"+user,bioInput.value);
  alert("Bio kaydedildi");
}

/* FOTO YÃœKLE */
function uploadPhoto(){
  const user=localStorage.getItem("loggedUser");
  const file=uploadInput.files[0];
  if(!file) return alert("Dosya seÃ§");

  const reader=new FileReader();
  reader.onload=e=>{
    const img=new Image();
    img.onload=function(){
      const canvas=document.createElement("canvas");
      const maxWidth=800;
      const scale=Math.min(1,maxWidth/img.width);

      canvas.width=img.width*scale;
      canvas.height=img.height*scale;

      canvas.getContext("2d").drawImage(img,0,0,canvas.width,canvas.height);
      const compressed=canvas.toDataURL("image/jpeg",0.7);

      savePendingPhoto(compressed,user);
      alert("Admin onayÄ±na gÃ¶nderildi");
      loadMyPhotos();
    };
    img.src=e.target.result;
  };
  reader.readAsDataURL(file);
}

function savePendingPhoto(src,user){
  const pending=JSON.parse(localStorage.getItem("pendingPhotos")||"[]");
  pending.push({id:Date.now(),src,user});
  localStorage.setItem("pendingPhotos",JSON.stringify(pending));
}

/* BENÄ°M FOTO */
function loadMyPhotos(){
  const user=localStorage.getItem("loggedUser");
  const pending=JSON.parse(localStorage.getItem("pendingPhotos")||"[]");
  const mine=pending.filter(p=>p.user===user);

  myPhotos.innerHTML="";

  mine.forEach(photo=>{
    const card=document.createElement("div");
    card.className="card";

    card.innerHTML=`
      <img src="${photo.src}">
      <button class="nav-btn" style="margin-top:8px;background:#ef4444;color:#fff;" onclick="deleteMyPhoto(${photo.id})">Sil</button>
    `;
    myPhotos.appendChild(card);
  });
}

function deleteMyPhoto(id){
  let pending=JSON.parse(localStorage.getItem("pendingPhotos")||"[]");
  pending=pending.filter(p=>p.id!==id);
  localStorage.setItem("pendingPhotos",JSON.stringify(pending));
  loadMyPhotos();
}

/* GALERÄ° */
function loadApprovedPhotos(){
  const approved=JSON.parse(localStorage.getItem("approvedPhotos")||"[]");
  gallery.innerHTML="";
  approved.forEach(p=>{
    const card=document.createElement("div");
    card.className="card";
    card.innerHTML=`<img src="${p.src}">`;
    gallery.appendChild(card);
  });
}

/* AUTH */
let authMode="login";

function showLogin(){authMode="login";authModal.style.display="flex";}
function showRegister(){authMode="register";authModal.style.display="flex";}
function closeAuth(){authModal.style.display="none";}

function authAction(){
  const user=authUser.value;
  const pass=authPass.value;
  if(!user||!pass) return alert("BoÅŸ bÄ±rakma");

  if(authMode==="register"){
    localStorage.setItem("user_"+user,pass);
    alert("KayÄ±t baÅŸarÄ±lÄ±");
  }else{
    if(localStorage.getItem("user_"+user)===pass){
      localStorage.setItem("loggedUser",user);
      updateNavbar();
      closeAuth();
      loadApprovedPhotos();
    }else alert("HatalÄ± giriÅŸ");
  }
}

function logout(){
  localStorage.removeItem("loggedUser");
  location.reload();
}

/* INIT */
updateNavbar();
loadApprovedPhotos();
</script>

</body>
</html>
